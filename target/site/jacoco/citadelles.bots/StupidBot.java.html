<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="fr"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>StupidBot.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">projet2-e</a> &gt; <a href="index.source.html" class="el_package">citadelles.bots</a> &gt; <span class="el_source">StupidBot.java</span></div><h1>StupidBot.java</h1><pre class="source lang-java linenums">package citadelles.bots;

import citadelles.BotView;
import citadelles.Hand;
import citadelles.districts.District;

import java.util.ArrayList;
import java.util.concurrent.atomic.AtomicInteger;

import static citadelles.characters.CharacterEnum.ASSASSIN;

/**
 * Class that contain all the logic of the stupid bot
 */
public class StupidBot extends Bot {
    /**
     * Adds the hand of the bot and a list of the placed quarters.
     * initializes the number of golds to 2.
     */
    public StupidBot(int id, Hand hand) {
<span class="fc" id="L21">        super(id, hand);</span>
<span class="fc" id="L22">    }</span>

    /**
     * Logic to choose if the bot will draw card or get gold
     *
     * If he has no more cards in his hand, he draws a card
     * Otherwise he takes gold
     */
    @Override
    public void chooseCardOrGold() {
<span class="fc bfc" id="L32" title="All 2 branches covered.">        if (getHandSize() &gt; 0) {</span>
<span class="fc" id="L33">            chooseAddGold();</span>
        } else {
<span class="fc" id="L35">            chooseAddCard();</span>
        }
<span class="fc" id="L37">    }</span>

    /**
     * Method choosing if the bot will construct a district or not
     *
     *
     */
    @Override
    public void eventuallyPlaceADistrict() {
<span class="fc" id="L46">        District districtHandMinValue = getDistrictHandMinValue();</span>
<span class="pc bpc" id="L47" title="1 of 4 branches missed.">        if (districtHandMinValue != null &amp;&amp; getGold() &gt;= districtHandMinValue.getValue()) {</span>
<span class="fc" id="L48">            placeCard(getHandList().indexOf(districtHandMinValue));</span>
        }
<span class="fc" id="L50">    }</span>

    /**
     * Logic of the bot if he is the Architect
     *
     * If he can, he places his lowest card
     * @return An arrayList of district to place
     */
    @Override
    public ArrayList&lt;District&gt; logicArchitect() {
<span class="fc" id="L60">        int canPlace = 2;</span>
<span class="fc" id="L61">        ArrayList&lt;District&gt; districtToPlace = new ArrayList&lt;&gt;();</span>
<span class="fc bfc" id="L62" title="All 2 branches covered.">        for (int i = 0; i &lt; canPlace; i++) {</span>
<span class="fc" id="L63">            District minDistrict = getDistrictHandMinValue();</span>
<span class="fc bfc" id="L64" title="All 2 branches covered.">            if (minDistrict != null){</span>
<span class="fc" id="L65">                districtToPlace.add(minDistrict);</span>
<span class="fc" id="L66">                getHandList().remove(minDistrict);</span>
            }
        }

<span class="fc" id="L70">        districtToPlace.forEach(district -&gt; getHandList().add(district));</span>

<span class="fc" id="L72">        return districtToPlace;</span>
    }

    /**
     * Logic of the bot if he is the Assassin
     *
     * Murders a random character other than himself, he can try to kill a visible discarded character
     *
     * @return The id of the character to kill
     */
    @Override
    public int logicAssassin() {
        int idRoleKilled;
<span class="fc" id="L85">        int nbCharacters = getGameView().getListAllCharacters().size();</span>
        do {
<span class="fc" id="L87">            idRoleKilled = (int) (Math.random() * nbCharacters);</span>
<span class="pc bpc" id="L88" title="1 of 2 branches missed.">        } while (idRoleKilled == ASSASSIN.getId());</span>

<span class="fc" id="L90">        return idRoleKilled;</span>
    }

    /**
     * Logic of the bot if he is the Warlord
     *
     * Destruct his first district. Completely stupid !
     *
     * @return A tab of int containing the player who will lose a district and the district to destroy
     */
    @Override
    public int[] logicWarlord() {
<span class="fc" id="L102">        BotView player = null;</span>
<span class="fc" id="L103">        District districtChosen = null;</span>

<span class="pc bpc" id="L105" title="1 of 2 branches missed.">        for (BotView bot : getGameView().getListAllBots()) {</span>
<span class="pc bpc" id="L106" title="2 of 4 branches missed.">            if (bot.getID() == getID() &amp;&amp; bot.getDistrictsPlaced().size() != 7) {</span>
<span class="fc bfc" id="L107" title="All 2 branches covered.">                for (District district : bot.getDistrictsPlaced()) {</span>
<span class="pc bpc" id="L108" title="2 of 4 branches missed.">                    if (district.getValue() - 1 &lt;= getGold() &amp;&amp; district.isCanBeDestruct()) {</span>
<span class="fc" id="L109">                        districtChosen = district;</span>
<span class="fc" id="L110">                        player = bot;</span>
<span class="fc" id="L111">                        break;</span>
                    }
<span class="nc" id="L113">                }</span>
<span class="fc" id="L114">                break;</span>
            }
<span class="nc" id="L116">        }</span>
<span class="fc" id="L117">        return buildDataWarlord(player, districtChosen);</span>
    }

    /**
     * Logic of the bot if he is the Thief
     *
     * Steals from a character other than himself,
     * even a visible discarded character
     *
     * @return The character id to steal
     */
    @Override
    public int logicThief() {
        //get a bot that is not him
<span class="fc" id="L131">        AtomicInteger id = new AtomicInteger();</span>
<span class="fc" id="L132">        id.set(-1);</span>
<span class="fc" id="L133">        getGameView().getListAllCharacters().forEach(c -&gt; {</span>
<span class="fc bfc" id="L134" title="All 2 branches covered.">            if (c.getId() != getCharacterId()) {</span>
<span class="fc" id="L135">                id.set(c.getId());</span>
            }
<span class="fc" id="L137">        });</span>

        //try to steal the bot
<span class="fc" id="L140">        return id.get();</span>
    }

    /**
     * Logic of the bot if he is the Magician
     *
     * He exchanges cards with someone other than himself
     */
    @Override
    public int logicMagician() {
<span class="fc" id="L150">        int random = (int) (Math.random() * (1)) + 1;</span>
<span class="pc bpc" id="L151" title="1 of 2 branches missed.">        if (random == 1) {</span>
            //get a bot that is not him
<span class="fc" id="L153">            AtomicInteger id = new AtomicInteger();</span>
<span class="fc" id="L154">            id.set(-1);</span>
<span class="fc" id="L155">            getGameView().getListAllBots().forEach(b -&gt; {</span>
<span class="pc bpc" id="L156" title="1 of 2 branches missed.">                if (b.getID() != getID()) {</span>
<span class="nc" id="L157">                    id.set(b.getID());</span>
                }
<span class="fc" id="L159">            });</span>
<span class="fc" id="L160">            return id.get();</span>
<span class="nc" id="L161">        } else return -1;</span>
    }

    /**
     * Logic if the bot has the Laboratory district
     *
     * If he has more than one card, he always chooses to
     * exchange his first card for a gold
     *
     * @return The index of a card in his hand. -1 if he can't
     */
    @Override
    public int logicLaboratory() {
<span class="fc bfc" id="L174" title="All 2 branches covered.">        if (getHandSize() &gt; 0) {</span>
<span class="fc" id="L175">            return 1;</span>
<span class="fc" id="L176">        } else return -1;</span>
    }

    /**
     * Logic if the bot has the Factory district
     *
     * He always tries to exchange 3 golds for 3 cards
     *
     * @return True if he wants to use the Factory power
     */
    @Override
    public boolean logicFactory() {
<span class="fc" id="L188">        return true;</span>
    }

    /**
     * Logic if the bot has the Graveyard district
     *
     * He is still trying to buy back the destroyed area without thinking
     *
     * @param destructedDistrict The district that has been destroyed
     * @return True if the bot want to re-buy it
     */
    @Override
    public boolean logicGraveyard(District destructedDistrict) {
<span class="fc" id="L201">        return true;</span>
    }

    @Override
    public ArrayList&lt;District&gt; discardList() {
<span class="fc" id="L206">        return getHandList();</span>
    }

    @Override
    public String toString() {
<span class="fc" id="L211">        return &quot;(Stupid) --&gt;&quot;;</span>
    }

    /**
     * Logic for choose a card when picking card from deck
     *
     * If he has one of the district picked, in his hand or placed,
     * then he takes it (which prevents him from laying it down).
     * Otherwise he takes the 1st one that is provided to him.
     *
     * @param districtsPicked
     * @return A District object
     */
    @Override
    public District chooseOneCard(ArrayList&lt;District&gt; districtsPicked) {
<span class="fc bfc" id="L226" title="All 2 branches covered.">        for (District district : districtsPicked) {</span>
<span class="fc bfc" id="L227" title="All 2 branches covered.">            if (isPlayerHaveDistrict(district)) return district;</span>
<span class="fc" id="L228">        }</span>
<span class="fc" id="L229">        return super.chooseOneCard(districtsPicked);</span>
    }

}


</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>